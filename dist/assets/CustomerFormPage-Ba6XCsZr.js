import{t as w,b as S,r as c,j as e,F as L,i as E,k as f,e as u,J as F,y as A,d as I}from"./index-0SUTSTHz.js";const D=()=>{const{id:d}=w(),h=S(),l=!!d,[s,m]=c.useState({name:"",email:"",phone:"",businessName:"",address:"",city:"",nif:"",rccm:"",website:"",notes:"",isCreditLimited:!1,creditLimit:0}),[y,N]=c.useState(l),[g,p]=c.useState(!1),[b,o]=c.useState(null);c.useEffect(()=>{l&&(async()=>{try{const i=await E(f(u,"customers",d));i.exists()?m(i.data()):o("Client non trouvé.")}catch{o("Erreur lors du chargement.")}finally{N(!1)}})()},[d,l]);const a=n=>{const{name:i,value:j,type:C}=n.target;if(C==="checkbox")m(x=>({...x,[i]:n.target.checked}));else{const x=["creditLimit"].includes(i);m(k=>({...k,[i]:x?parseFloat(j)||0:j}))}},v=async n=>{n.preventDefault(),p(!0),o(null);try{l?await F(f(u,"customers",d),s,{merge:!0}):await A(I(u,"customers"),s),h("/customers")}catch(i){o(`Erreur: ${i.message}`)}finally{p(!1)}};if(y)return e.jsx("div",{className:"p-8 text-center",children:"Chargement..."});const r="mt-1 block w-full px-4 py-3 bg-white border border-gray-300 rounded-xl shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all font-medium",t="block text-xs font-black uppercase text-gray-400 tracking-widest mb-1";return e.jsxs("div",{className:"max-w-4xl mx-auto pb-12",children:[e.jsx("header",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>h("/customers"),className:"p-2 mr-4 bg-white dark:bg-gray-800 rounded-full shadow-sm border dark:border-gray-700 hover:scale-110 transition-transform",children:e.jsx(L,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:l?"Modifier le Profil":"Nouveau Client"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Complétez les informations pour une gestion optimale."})]})]})}),e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[b&&e.jsx("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-xl font-bold",children:b}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-black text-primary-600 uppercase mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center mr-3 text-sm",children:"1"}),"Identité Personnelle / Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Nom Complet *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:a,required:!0,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Téléphone *"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:a,required:!0,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Adresse Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Site Web"}),e.jsx("input",{type:"url",name:"website",value:s.website,onChange:a,placeholder:"https://...",className:r})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-black text-primary-600 uppercase mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center mr-3 text-sm",children:"2"}),"Entreprise & Fiscalité"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:t,children:"Nom de l'entreprise (Raison Sociale)"}),e.jsx("input",{type:"text",name:"businessName",value:s.businessName,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"NIF (Identifiant Fiscal)"}),e.jsx("input",{type:"text",name:"nif",value:s.nif,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"RCCM"}),e.jsx("input",{type:"text",name:"rccm",value:s.rccm,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Ville"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Adresse Complète"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:a,className:r})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-black text-orange-600 uppercase mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mr-3 text-sm",children:"3"}),"Compte & Crédit"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-2xl border border-orange-100 dark:border-orange-800",children:[e.jsx("input",{type:"checkbox",name:"isCreditLimited",id:"isCreditLimited",checked:s.isCreditLimited,onChange:a,className:"h-6 w-6 text-primary-600 rounded-lg border-gray-300 mr-4"}),e.jsx("label",{htmlFor:"isCreditLimited",className:"text-sm font-bold text-orange-900 dark:text-orange-100 uppercase",children:"Activer une limite de crédit pour ce client"})]}),s.isCreditLimited&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in slide-in-from-top-4 duration-300",children:e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Plafond autorisé (FCFA)"}),e.jsx("input",{type:"number",name:"creditLimit",value:s.creditLimit,onChange:a,className:`${r} border-orange-300 font-black text-orange-600`})]})}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Observations / Notes"}),e.jsx("textarea",{name:"notes",value:s.notes,onChange:a,rows:3,className:r,placeholder:"Ajoutez ici des détails spécifiques au client..."})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{type:"submit",disabled:g,className:"px-12 py-5 bg-primary-600 text-white rounded-2xl font-black shadow-2xl hover:bg-primary-700 transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-50 uppercase tracking-widest",children:g?"Sauvegarde...":"Enregistrer le Profil"})})]})]})};export{D as default};
