import{t as w,b as k,r as i,j as e,F as C,i as S,k as b,e as m,J as E,y as F,d as I}from"./index-0SUTSTHz.js";const q=()=>{const{id:c}=w(),x=k(),n=!!c,[s,u]=i.useState({name:"",email:"",phone:"",businessName:"",address:"",city:"",nif:"",rccm:"",website:"",notes:""}),[j,y]=i.useState(n),[p,h]=i.useState(!1),[g,d]=i.useState(null);i.useEffect(()=>{n&&(async()=>{try{const l=await S(b(m,"suppliers",c));l.exists()?u(l.data()):d("Fournisseur non trouvé.")}catch{d("Erreur lors du chargement.")}finally{y(!1)}})()},[c,n]);const a=o=>{const{name:l,value:f}=o.target;u(v=>({...v,[l]:f}))},N=async o=>{o.preventDefault(),h(!0),d(null);try{n?await E(b(m,"suppliers",c),s,{merge:!0}):await F(I(m,"suppliers"),s),x("/suppliers")}catch(l){d(`Erreur: ${l.message}`)}finally{h(!1)}};if(j)return e.jsx("div",{className:"p-8 text-center",children:"Chargement..."});const r="mt-1 block w-full px-4 py-3 bg-white border border-gray-300 rounded-xl shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all font-medium",t="block text-xs font-black uppercase text-gray-400 tracking-widest mb-1";return e.jsxs("div",{className:"max-w-4xl mx-auto pb-12",children:[e.jsx("header",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>x("/suppliers"),className:"p-2 mr-4 bg-white dark:bg-gray-800 rounded-full shadow-sm border dark:border-gray-700 hover:scale-110 transition-transform",children:e.jsx(C,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:n?"Modifier le Fournisseur":"Nouveau Fournisseur"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Gérez vos relations d'approvisionnement avec précision."})]})]})}),e.jsxs("form",{onSubmit:N,className:"space-y-8",children:[g&&e.jsx("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-xl font-bold",children:g}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-black text-primary-600 uppercase mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center mr-3 text-sm",children:"1"}),"Contact & Identité"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Nom de Contact *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:a,required:!0,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Téléphone *"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:a,required:!0,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Adresse Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Site Web"}),e.jsx("input",{type:"url",name:"website",value:s.website,onChange:a,placeholder:"https://...",className:r})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-black text-primary-600 uppercase mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center mr-3 text-sm",children:"2"}),"Entreprise & Fiscalité"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:t,children:"Nom de l'entreprise (Raison Sociale)"}),e.jsx("input",{type:"text",name:"businessName",value:s.businessName,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"NIF (Identifiant Fiscal)"}),e.jsx("input",{type:"text",name:"nif",value:s.nif,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"RCCM"}),e.jsx("input",{type:"text",name:"rccm",value:s.rccm,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Ville"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:a,className:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Adresse Complète"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:a,className:r})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-black text-primary-600 uppercase mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center mr-3 text-sm",children:"3"}),"Compléments"]}),e.jsxs("div",{children:[e.jsx("label",{className:t,children:"Observations / Notes"}),e.jsx("textarea",{name:"notes",value:s.notes,onChange:a,rows:3,className:r,placeholder:"Historique des échanges, conditions de paiement habituelles..."})]})]}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{type:"submit",disabled:p,className:"px-12 py-5 bg-primary-600 text-white rounded-2xl font-black shadow-2xl hover:bg-primary-700 transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-50 uppercase tracking-widest",children:p?"Sauvegarde...":"Enregistrer Fournisseur"})})]})]})};export{q as default};
